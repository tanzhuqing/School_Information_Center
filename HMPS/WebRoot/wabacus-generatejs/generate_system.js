var WX_selectedRowBgcolor='#ACFAF0';var WXConfig=new Object();WXConfig.showreport_url='/HMPS/ShowReport.wx';WXConfig.showreport_onpage_url='/HMPS/ShowReport.wx?DISPLAY_TYPE=1';WXConfig.webroot='/HMPS/';function getInputBoxValue(id,type){if(id==null||id==''||type==null||type=='') return null;  if(type=='textbox')  {    var boxObj=document.getElementById(id);if(boxObj!=null){ return boxObj.value;}return null;  }  if(type=='datepicker')  {    var boxObj=document.getElementById(id);if(boxObj!=null){ return boxObj.value;}return null;  }  if(type=='passwordbox')  {    var boxObj=document.getElementById(id);if(boxObj!=null){ return boxObj.value;}return null;  }  if(type=='textareabox')  {    var boxObj=document.getElementById(id);if(boxObj!=null){ return boxObj.value;}return null;  }  if(type=='file')  {    var obj=document.getElementById(id);if(obj!=null){var valTemp='';if(obj.tagName=='IMG'){valTemp=obj.getAttribute('srcpath');}else{valTemp=obj.value;}return valTemp;}return null;  }  if(type=='radiobox')  {    var radioObjs=document.getElementsByName(id);if(radioObjs!=null){  for(i=0;i<radioObjs.length;i=i+1){      if(radioObjs[i].checked){          return radioObjs[i].value;      }  }  return '';}return '';  }  if(type=='checkbox')  {    var chkObjs=document.getElementsByName(id);if(chkObjs==null||chkObjs.length==0) return '';var value=''; var separator=chkObjs[0].getAttribute('separator');if(separator==null||separator=='') separator=' ';for(i=0,len=chkObjs.length;i<len;i=i+1){    if(chkObjs[i].checked){        value=value+chkObjs[i].value+separator;    }}value=wx_rtrim(value,separator);return value;  }  if(type=='popupbox')  {    var boxObj=document.getElementById(id);if(boxObj!=null){ return boxObj.value;}return null;  }  if(type=='richtextbox')  {    return tinyMCE.get(id).getContent();  }  if(type=='selectbox')  {    var selectboxObj=document.getElementById(id);if(selectboxObj!=null){if(selectboxObj.options.length>0){ return selectboxObj.options[selectboxObj.options.selectedIndex].value;} else {return '';}}return null;  }  if(type=='datepicker2')  {    var boxObj=document.getElementById(id);if(boxObj!=null){ return boxObj.value;}return null;  }return null;}function setInputBoxValue(id,type,newvalue){if(id==null||id==''||type==null||type=='') return;if(newvalue==null) newvalue='';  if(type=='textbox'){  var boxObj=document.getElementById(id);if(boxObj){boxObj.value=newvalue;}  }  if(type=='datepicker'){  var boxObj=document.getElementById(id);if(boxObj){boxObj.value=newvalue;}  }  if(type=='passwordbox'){  var boxObj=document.getElementById(id);if(boxObj){boxObj.value=newvalue;}  }  if(type=='textareabox'){  var boxObj=document.getElementById(id);if(boxObj){boxObj.value=newvalue;}  }  if(type=='file'){  var boxObj=document.getElementById(id);if(boxObj){if(boxObj.tagName=='IMG'){boxObj.setAttribute('srcpath',newvalue);boxObj.src=newvalue;}else{boxObj.value=newvalue;}}  }  if(type=='radiobox'){  var radioObjs=document.getElementsByName(id);if(radioObjs!=null&&radioObjs.length>0){  for(var i=0,len=radioObjs.length;i<len;i=i+1){      if(radioObjs[i].value==newvalue){radioObjs[i].checked=true;break;}  }}  }  if(type=='checkbox'){  var chkObjs=document.getElementsByName(id);if(chkObjs==null||chkObjs.length==0) return;var separator=chkObjs[0].getAttribute('separator');if(separator==null||separator=='') separator=' ';for(var i=0,len=chkObjs.length;i<len;i=i+1){  if(isSelectedValueForCheckBox(newvalue,chkObjs[i].value,separator)){chkObjs[i].checked=true;}}  }  if(type=='popupbox'){  var boxObj=document.getElementById(id);if(boxObj){boxObj.value=newvalue;}  }  if(type=='richtextbox'){  tinyMCE.get(id).setContent(newvalue);  }  if(type=='selectbox'){  var selectboxObj=document.getElementById(id);if(selectboxObj==null||selectboxObj.options.length==0){return;}var oldvalue=selectboxObj.options[selectboxObj.selectedIndex].value;if(oldvalue&&oldvalue==newvalue){return;}var i=0;for(len=selectboxObj.options.length;i<len;i=i+1){if(selectboxObj.options[i].value==newvalue){selectboxObj.options[i].selected=true;break;}}if(i!=selectboxObj.options.length&&selectboxObj.onchange){selectboxObj.onchange();}  }  if(type=='datepicker2'){  var boxObj=document.getElementById(id);if(boxObj){boxObj.value=newvalue;}  }}function fillInputBoxToTd(pageid,reportguid,reportfamily,tdObj,type,name,fillmode,displaymode){   var boxstr='';   var textalign=tdObj.style.textAlign||tdObj.getAttribute('align'); if(textalign==null) textalign='left';   var wid=tdObj.clientWidth-2;   var boxValue=tdObj.getAttribute('value');  if(boxValue==null){boxValue='';}   var boxId=name;if(boxId.lastIndexOf('__')>0) boxId=boxId.substring(0,boxId.lastIndexOf('__'));   var inputboxSpanObj=document.getElementById('span_'+boxId+'_span');   var styleproperty=null;var parentid=null;var childid=null;var onfocusmethod=null;var onblurmethod=null;   var jsvalidateOnblurMethod=null;   var style_propertyvalue=null;   if(inputboxSpanObj!=null){       onfocusmethod=inputboxSpanObj.getAttribute('onfocus_propertyvalue');onblurmethod=inputboxSpanObj.getAttribute('onblur_propertyvalue');       styleproperty=inputboxSpanObj.getAttribute('styleproperty');style_propertyvalue=inputboxSpanObj.getAttribute('style_propertyvalue');       jsvalidateOnblurMethod=inputboxSpanObj.getAttribute('jsvalidate_onblur_method');       parentid=inputboxSpanObj.getAttribute('parentid');       childid=inputboxSpanObj.getAttribute('childid');   }   if(styleproperty==null) styleproperty='';styleproperty=paramdecode(styleproperty);   if(style_propertyvalue==null) style_propertyvalue='';   if(onfocusmethod==null) onfocusmethod='';if(onblurmethod==null) onblurmethod='';   if(jsvalidateOnblurMethod!=null&&jsvalidateOnblurMethod!=''){       if(onblurmethod!=''&&onblurmethod.lastIndexOf(';')!=onblurmethod.length-1) onblurmethod=onblurmethod+';';       onblurmethod=onblurmethod+jsvalidateOnblurMethod;   }   if(onfocusmethod!=''&&onfocusmethod.lastIndexOf(';')!=onfocusmethod.length-1) onfocusmethod+=';';   if(onblurmethod!=''&&onblurmethod.lastIndexOf(';')!=onblurmethod.length-1) onblurmethod+=';';   if(type=='textbox'){ boxstr="<input type='text' value=\""+boxValue+"\"";boxstr=boxstr+" id= '"+name+"' name='"+name+"' typename='textbox' "+styleproperty;boxstr=boxstr+" style=\"text-align:"+textalign+";";if(wid!=null&&parseInt(wid)>0){boxstr=boxstr+"width:"+wid+";";}boxstr=boxstr+style_propertyvalue+"\"";boxstr=boxstr+" onblur=\"try{"+onblurmethod+"fillInputBoxValueToParentTd(this,'textbox','"+reportguid+"','"+reportfamily+"',"+fillmode+");}catch(e){logErrorsAsJsFileLoad(e);}\"";var typePrompt=null;if(inputboxSpanObj!=null){typePrompt=inputboxSpanObj.getAttribute('typePrompt');}if(onfocusmethod!=null&&onfocusmethod!=''||typePrompt!=null&&typePrompt!=''){  boxstr=boxstr+" onfocus=\"try{"+onfocusmethod;   if(typePrompt!=null&&typePrompt!=''){boxstr=boxstr+"if(this.obj==null) this.obj=initializeTypePromptProperties(this,'"+typePrompt+"');";}  boxstr=boxstr+"}catch(e){logErrorsAsJsFileLoad(e);}\"";}boxstr=boxstr+">";   }   if(type=='datepicker'){var datepickerparams=null;var onclick_propertyvalue=null;if(inputboxSpanObj!=null){  datepickerparams=inputboxSpanObj.getAttribute('inputboxparams');onclick_propertyvalue=inputboxSpanObj.getAttribute('onclick_propertyvalue');}if(onclick_propertyvalue==null) onclick_propertyvalue='';boxstr="<input type='text' value=\""+boxValue+"\"";boxstr=boxstr+" id= '"+name+"' name='"+name+"' typename='datepicker' "+styleproperty;boxstr=boxstr+" style=\"text-align:"+textalign+";";if(wid!=null&&parseInt(wid)>0){boxstr=boxstr+"width:"+wid+";";}boxstr=boxstr+style_propertyvalue+"\"";boxstr=boxstr+" onblur=\"try{fillInputBoxValueToParentTd(this,'datepicker','"+reportguid+"','"+reportfamily+"',"+fillmode+");;"+onblurmethod+"}catch(e){logErrorsAsJsFileLoad(e);}\"";if(onfocusmethod!=null&&onfocusmethod!=''){boxstr=boxstr+" onfocus=\"try{"+onfocusmethod+"}catch(e){logErrorsAsJsFileLoad(e);}\"";}onclick_propertyvalue=onclick_propertyvalue+";WdatePicker(";if(datepickerparams!=null&&datepickerparams!=''){onclick_propertyvalue=onclick_propertyvalue+datepickerparams}onclick_propertyvalue=onclick_propertyvalue+");";boxstr=boxstr+" onclick=\"try{"+onclick_propertyvalue+"}catch(e){logErrorsAsJsFileLoad(e);}\"";boxstr=boxstr+">";   }   if(type=='passwordbox'){ boxstr="<input type='password' value=\""+boxValue+"\"";boxstr=boxstr+" id= '"+name+"' name='"+name+"' typename='passwordbox' "+styleproperty;boxstr=boxstr+" style=\"text-align:"+textalign+";";if(wid!=null&&parseInt(wid)>0){boxstr=boxstr+"width:"+wid+";";}boxstr=boxstr+style_propertyvalue+"\"";boxstr=boxstr+" onblur=\"try{"+onblurmethod+"fillInputBoxValueToParentTd(this,'passwordbox','"+reportguid+"','"+reportfamily+"',"+fillmode+");}catch(e){logErrorsAsJsFileLoad(e);}\"";var typePrompt=null;if(inputboxSpanObj!=null){typePrompt=inputboxSpanObj.getAttribute('typePrompt');}if(onfocusmethod!=null&&onfocusmethod!=''||typePrompt!=null&&typePrompt!=''){  boxstr=boxstr+" onfocus=\"try{"+onfocusmethod;   if(typePrompt!=null&&typePrompt!=''){boxstr=boxstr+"if(this.obj==null) this.obj=initializeTypePromptProperties(this,'"+typePrompt+"');";}  boxstr=boxstr+"}catch(e){logErrorsAsJsFileLoad(e);}\"";}boxstr=boxstr+">";   }   if(type=='textareabox'){if(fillmode==2){  var textAreabox=document.getElementById('WX_TEXTAREA_BOX');  if(textAreabox==null){      textAreabox=document.createElement('textarea');      textAreabox.className='cls-inputbox-textareabox2';textAreabox.setAttribute('typename','textareabox');      textAreabox.setAttribute('id','WX_TEXTAREA_BOX');      textAreabox.errorPromptObj=createJsValidateTipObj(textAreabox);      document.body.appendChild(textAreabox);  }  textAreabox.onblur=function(){if(onblurmethod!=''){eval(onblurmethod);}fillInputBoxValueToParentTd(this,'textareabox',reportguid,reportfamily,fillmode);;};  textAreabox.onfocus=function(){if(onfocusmethod!='') eval(onfocusmethod);};  textAreabox.value=boxValue;  setTextAreaBoxPosition(textAreabox,tdObj);  textAreabox.focus();textAreabox.dataObj=initInputBoxData(textAreabox,tdObj);boxstr='';}else if(fillmode==1){  boxstr="<textarea  ";boxstr=boxstr+" id= '"+name+"' name='"+name+"' typename='textareabox' "+styleproperty;boxstr=boxstr+" style=\"text-align:"+textalign+";";if(wid!=null&&parseInt(wid)>0){boxstr=boxstr+"width:"+wid+";";}boxstr=boxstr+style_propertyvalue+"\"";  boxstr=boxstr+" onblur=\"try{"+onblurmethod+"fillInputBoxValueToParentTd(this,'textareabox','"+reportguid+"','"+reportfamily+"',"+fillmode+");}catch(e){logErrorsAsJsFileLoad(e);}\"";  if(onfocusmethod!=null&&onfocusmethod!=''){boxstr=boxstr+" onfocus=\"try{"+onfocusmethod+"}catch(e){logErrorsAsJsFileLoad(e);}\"";}  boxstr=boxstr+">"+boxValue+"</textarea>";}   }   if(type=='file'){var pagewidth=null;var pageheight=null;var displaytype=null;onclick_propertyvalue=null;if(inputboxSpanObj!=null){   displaytype=inputboxSpanObj.getAttribute('displaytype');onclick_propertyvalue=inputboxSpanObj.getAttribute('onclick_propertyvalue');  pagewidth=inputboxSpanObj.getAttribute('pagewidth');pageheight=inputboxSpanObj.getAttribute('pageheight');}if(pagewidth==null||parseInt(pagewidth,10)<=0) pagewidth='300';if(pageheight==null||parseInt(pageheight,10)<=0) pageheight='160';if(displaytype==null||displaytype=='') displaytype='textbox';if(onclick_propertyvalue==null) onclick_propertyvalue='';onclick_propertyvalue="wx_winpage('/HMPS/ShowReport.wx?PAGEID="+pageid+"&REPORTGUID="+reportguid+"&INPUTBOXID="+name+"&ACTIONTYPE=ShowUploadFilePage&FILEUPLOADTYPE=fileinputbox','文件上传',"+parseInt(pagewidth,10)+","+parseInt(pageheight,10)+",false,false,closePopUpPageEvent);"+onclick_propertyvalue;if(displaytype=='image'){  boxstr="<img  src=\""+boxValue+"\" srcpath=\""+boxValue+"\"";}else{  boxstr="<input type='text' value=\""+boxValue+"\"";}if(displaytype=='image'){  boxstr=boxstr+" id= '"+name+"' name='"+name+"'  typename='file' "+styleproperty;  boxstr=boxstr+" style=\""+style_propertyvalue+"\"";}else{boxstr=boxstr+" id= '"+name+"' name='"+name+"' typename='file' "+styleproperty;boxstr=boxstr+" style=\"text-align:"+textalign+";";if(wid!=null&&parseInt(wid)>0){boxstr=boxstr+"width:"+wid+";";}boxstr=boxstr+style_propertyvalue+"\"";}if(onfocusmethod!=null&&onfocusmethod!='') boxstr=boxstr+" onfocus=\"try{"+onfocusmethod+"}catch(e){logErrorsAsJsFileLoad(e);}\"";if(onblurmethod!=null&&onblurmethod!='') boxstr=boxstr+" onblur=\"try{"+onblurmethod+"}catch(e){logErrorsAsJsFileLoad(e);}\"";boxstr=boxstr+" onclick=\"try{"+onclick_propertyvalue+"}catch(e){logErrorsAsJsFileLoad(e);}\"/>";   }   if(type=='radiobox'){if(inputboxSpanObj!=null){  var childs=inputboxSpanObj.getElementsByTagName("span");  if(childs!=null&&childs.length>0){      var optionlabel=null;var optionvalue=null;      for(var i=0,len=childs.length;i<len;i++){           optionlabel=childs[i].getAttribute('label'); optionvalue=childs[i].getAttribute('value');          boxstr=boxstr+"<input type='radio'  value=\""+optionvalue+"\" label='"+optionlabel+"'";boxstr=boxstr+" id= '"+name+"' name='"+name+"' typename='radiobox' "+styleproperty;boxstr=boxstr+" style=\""+style_propertyvalue+"\"";          if(boxValue==optionvalue) boxstr=boxstr+" checked";          boxstr=boxstr+" onblur=\"try{"+onblurmethod+";fillGroupBoxValue(this,'radiobox','"+name+"','"+reportguid+"','"+reportfamily+"',"+fillmode+");}catch(e){logErrorsAsJsFileLoad(e);}\"";          boxstr=boxstr+" onfocus=\"try{"+onfocusmethod+";setGroupBoxStopFlag('"+name+"');}catch(e){logErrorsAsJsFileLoad(e);}\"";          boxstr=boxstr+">"+optionlabel+"</input>";      }  }}   }   if(type=='checkbox'){if(inputboxSpanObj!=null){  var childs=inputboxSpanObj.getElementsByTagName("span");  if(childs!=null&&childs.length>0){      var optionlabel=null;var optionvalue=null;      for(var i=0,len=childs.length;i<len;i++){           optionlabel=childs[i].getAttribute('label'); optionvalue=childs[i].getAttribute('value');          boxstr=boxstr+"<input type='checkbox'  value=\""+optionvalue+"\" label='"+optionlabel+"'";boxstr=boxstr+" id= '"+name+"' name='"+name+"' typename='checkbox' "+styleproperty;boxstr=boxstr+" style=\""+style_propertyvalue+"\"";          var separator=null;if(inputboxSpanObj!=null) separator=inputboxSpanObj.getAttribute('separator');if(separator==null||separator=='') separator=' ';if(isSelectedValueForCheckBox(boxValue,optionvalue,separator)) boxstr=boxstr+" checked";          boxstr=boxstr+" onblur=\"try{"+onblurmethod+";fillGroupBoxValue(this,'checkbox','"+name+"','"+reportguid+"','"+reportfamily+"',"+fillmode+");}catch(e){logErrorsAsJsFileLoad(e);}\"";          boxstr=boxstr+" onfocus=\"try{"+onfocusmethod+";setGroupBoxStopFlag('"+name+"');}catch(e){logErrorsAsJsFileLoad(e);}\"";          boxstr=boxstr+">"+optionlabel+"</input>";      }  }}   }   if(type=='popupbox'){if(inputboxSpanObj==null){wx_alert('显示弹出窗口输入框失败，没有取到弹出窗口页面所需的参数'); return false;}var paramsOfGetPageUrl=inputboxSpanObj.getAttribute('paramsOfGetPageUrl');var winwidth=inputboxSpanObj.getAttribute('pagewidth'); var winheight=inputboxSpanObj.getAttribute('pageheight');if(pagewidth==null||parseInt(pagewidth,10)<=0) pagewidth='500';if(pageheight==null||parseInt(pageheight,10)<=0) pageheight='300';var onclick_propertyvalue=inputboxSpanObj.getAttribute('onclick_propertyvalue');if(onclick_propertyvalue==null) onclick_propertyvalue='';onclick_propertyvalue="var pageurl=getPopupPageUrl('"+name+"','"+paramsOfGetPageUrl+"');wx_winpage(pageurl,'选择',"+winwidth+","+winheight+",false,false,closePopUpPageEvent);"+onclick_propertyvalue;boxstr="<input type='text' value=\""+boxValue+"\"";boxstr=boxstr+" id= '"+name+"' name='"+name+"' typename='popupbox' "+styleproperty;boxstr=boxstr+" style=\"text-align:"+textalign+";";if(wid!=null&&parseInt(wid)>0){boxstr=boxstr+"width:"+wid+";";}boxstr=boxstr+style_propertyvalue+"\"";if(onfocusmethod!=null&&onfocusmethod!='') boxstr=boxstr+" onfocus=\"try{"+onfocusmethod+"}catch(e){logErrorsAsJsFileLoad(e);}\"";if(onblurmethod!=null&&onblurmethod!='') boxstr=boxstr+" onblur=\"try{"+onblurmethod+"}catch(e){logErrorsAsJsFileLoad(e);}\"";boxstr=boxstr+" onClick=\"try{"+onclick_propertyvalue+"}catch(e){logErrorsAsJsFileLoad(e);}\">";   }   if(type=='richtextbox'){   }   if(type=='selectbox'){var onchangeEvent='';if(inputboxSpanObj!=null){onchangeEvent=inputboxSpanObj.getAttribute('onchange_propertyvalue');}var boxstr="<select ";boxstr=boxstr+" id= '"+name+"' name='"+name+"' typename='selectbox' "+styleproperty;boxstr=boxstr+" style=\"text-align:"+textalign+";";if(wid!=null&&parseInt(wid)>0){boxstr=boxstr+"width:"+wid+";";}boxstr=boxstr+style_propertyvalue+"\"";boxstr=boxstr+" onblur=\"try{"+onblurmethod+"fillInputBoxValueToParentTd(this,'selectbox','"+reportguid+"','"+reportfamily+"',"+fillmode+");}catch(e){logErrorsAsJsFileLoad(e);}\"";if(childid!=null&&childid!=''){  var myonchange='';  if(fillmode==1){      var realchildid=childid;      if(name.lastIndexOf('__')>0){realchildid=realchildid+name.substring(name.lastIndexOf('__'));}      myonchange="reloadSelectBoxData('/HMPS/ShowReport.wx?PAGEID="+pageid+"&REPORTGUID="+reportguid+"&INPUTBOXID="+childid+"&PARENTVALUE='+document.getElementById('"+name+"').options[document.getElementById('"+name+"').options.selectedIndex].value+'&ACTIONTYPE=GetSelectBoxDataList','"+realchildid+"',this);";  }else{      myonchange="resetChildSelectBoxData(this);";  }  if(onchangeEvent==null||onchangeEvent==''){onchangeEvent=myonchange;}else{onchangeEvent=onchangeEvent+';'+myonchange;}}if(onchangeEvent!=null&&onchangeEvent!=''){boxstr=boxstr+" onchange=\"try{"+onchangeEvent+"}catch(e){logErrorsAsJsFileLoad(e);}\"";}if(parentid!=null&&parentid!=''){  if(fillmode==2){      var realParentSelectBoxTdId=parentid+'__td';var originalChildid=name;      if(name.lastIndexOf('__')>0){          realParentSelectBoxTdId=realParentSelectBoxTdId+name.substring(name.lastIndexOf('__')+2);           originalChildid=name.substring(0,name.lastIndexOf('__'));      }      var parentValue=''; var parentSelectBoxTdObj=document.getElementById(realParentSelectBoxTdId);      if(parentSelectBoxTdObj!=null) parentValue=getEditable2ColValueByParentTd(parentSelectBoxTdObj);if(parentValue==null) parentValue='';      onfocusmethod=onfocusmethod+"reloadSelectBoxData('/HMPS/ShowReport.wx?PAGEID="+pageid+"&REPORTGUID="+reportguid+"&INPUTBOXID="+originalChildid+"&PARENTVALUE="+parentValue+"&ACTIONTYPE=GetSelectBoxDataList','"+name+"',null);";  }  boxstr=boxstr+" SELECTEDVALUE=\""+boxValue+"\"";}  if(onfocusmethod!=null&&onfocusmethod!='') boxstr=boxstr+" onfocus=\"try{"+onfocusmethod+"}catch(e){logErrorsAsJsFileLoad(e);}\"";  boxstr=boxstr+">";  if(inputboxSpanObj!=null){      var optionSpans=inputboxSpanObj.getElementsByTagName("span");      if(optionSpans!=null&&optionSpans.length>0){           var optionlabel=null;var optionvalue=null;          for(var i=0,len=optionSpans.length;i<len;i++){              optionlabel=optionSpans[i].getAttribute('label'); optionvalue=optionSpans[i].getAttribute('value');              boxstr=boxstr+"<option value='"+optionvalue+"'";              if(boxValue==optionvalue) boxstr=boxstr+" selected";              boxstr=boxstr+">"+optionlabel+"</option>";          }      }  }boxstr=boxstr+"</select>";   }   if(type=='datepicker2'){var dateformat=null;if(inputboxSpanObj!=null) dateformat=inputboxSpanObj.getAttribute('dateformat');if(dateformat==null||dateformat=='') dateformat='y-mm-dd';boxstr="<input type='text' value=\""+boxValue+"\"";boxstr=boxstr+" id= '"+name+"' name='"+name+"' typename='datepicker2' "+styleproperty;boxstr=boxstr+" style=\"text-align:"+textalign+";";if(wid!=null&&parseInt(wid)>0){boxstr=boxstr+"width:"+wid+";";}boxstr=boxstr+style_propertyvalue+"\"";boxstr=boxstr+" onblur=\"try{fillInputBoxValueToParentTd(this,'datepicker2','"+reportguid+"','"+reportfamily+"',"+fillmode+");;"+onblurmethod+"}catch(e){logErrorsAsJsFileLoad(e);}\"";boxstr=boxstr+" onfocus=\"try{showCalendar('"+name+"', '"+dateformat+"');"+onfocusmethod+"}catch(e){logErrorsAsJsFileLoad(e);}\"";boxstr=boxstr+">";   }   setColDisplayValueToEditable2Td(tdObj,boxstr);var colInnerWrapEle=getColInnerWrapElement(tdObj);if(colInnerWrapEle==null) colInnerWrapEle=tdObj;   if(colInnerWrapEle.children[0]){       colInnerWrapEle.children[0].focus();          if(fillmode==2){              for(var j=0,len=colInnerWrapEle.children.length;j<len;j++){                  if(colInnerWrapEle.children[j].nodeType!=1) continue;                  colInnerWrapEle.children[j].dataObj=initInputBoxData(colInnerWrapEle.children[j],tdObj);              }          }   }}function fillInputBoxValueToParentTd(boxObj,type,reportguid,reportfamily,fillmode){   var parentTdObj=null;   if(fillmode==1){parentTdObj=getParentElementObj(boxObj,'TD');}else if(fillmode==2){parentTdObj=boxObj.dataObj.parentTdObj;}   if(parentTdObj==null) {wx_alert('没有取到输入框所属<td/>对象，设置其值失败');return;}   var label=' ';var value=' ';  if(type=='textbox'){  value=boxObj.value; label=boxObj.value;  }  if(type=='datepicker'){  value=boxObj.value; label=boxObj.value;  }  if(type=='passwordbox'){  value=boxObj.value; label=boxObj.value;  }  if(type=='textareabox'){  if(fillmode==2){var textareaObj=document.getElementById('WX_TEXTAREA_BOX');value=textareaObj.value; label=textareaObj.value;textareaObj.style.display='none';}else if(fillmode==1){value=boxObj.value; label=boxObj.value;}  }  if(type=='file'){  if(boxObj.tagName=='IMG'){value=boxObj.getAttribute('srcpath'); label=value;}else{value=boxObj.value; label=boxObj.value;}  }  if(type=='radiobox'){  var radioname=boxObj.getAttribute('name');if(radioname!=null&&radioname!=''){  var radioObjs=document.getElementsByName(radioname);  if(radioObjs!=null&&radioObjs.length>0){      for(i=0,len=radioObjs.length;i<len;i=i+1){          if(radioObjs[i].checked){              value=radioObjs[i].value;label=radioObjs[i].getAttribute('label');break;          }      }  }}  }  if(type=='checkbox'){  var chkboxname=boxObj.getAttribute('name');if(chkboxname==null||chkboxname=='') return '';var chkObjs=document.getElementsByName(chkboxname);if(chkObjs==null||chkObjs.length==0) return '';var value='';var label=''; var separator=chkObjs[0].getAttribute('separator');if(separator==null||separator=='') separator=' ';for(i=0,len=chkObjs.length;i<len;i=i+1){    if(chkObjs[i].checked){        label=label+chkObjs[i].getAttribute('label')+separator;value=value+chkObjs[i].value+separator;    }}label=wx_rtrim(label,separator);value=wx_rtrim(value,separator);  }  if(type=='popupbox'){  value=boxObj.value; label=boxObj.value;  }  if(type=='richtextbox'){  if(fillmode==2){  value=tinyMCE.get('WX_RICHTEXT_BOX').getContent();label=value;}else if(fillmode==1){  value=tinyMCE.get(boxObj.getAttribute('id')).getContent(); label=value;}  }  if(type=='selectbox'){  if(boxObj.options.length>0){value=boxObj.options[boxObj.options.selectedIndex].value;label=boxObj.options[boxObj.options.selectedIndex].text;}else{value='';label='';}  }  if(type=='datepicker2'){  value=boxObj.value; label=boxObj.value;  }   if(label==null){label='';}else{ label=label.replace(/</g,'&lt;');label=label.replace(/>/g,'&gt;');label=label.replace(/\'/g,'&#039;');label=label.replace(/\"/g,'&quot;');}   if(fillmode==2) setColDisplayValueToEditable2Td(parentTdObj,label);   if(value==null){value='';}else{ value=value.replace(/</g,'&lt;');value=value.replace(/>/g,'&gt;');value=value.replace(/\'/g,'&#039;');value=value.replace(/\"/g,'&quot;');}   var oldvalue=parentTdObj.getAttribute('value');if(oldvalue==null) oldvalue='';   if(value!=oldvalue){       parentTdObj.setAttribute('value',value);       if(reportfamily==ReportFamily.EDITABLELIST2||reportfamily==ReportFamily.LISTFORM){           var childids=parentTdObj.getAttribute('childDataIdSuffixes');           if(childids!=null&&childids!=''){               updateGroupValueInAllChildTrs(reportguid,parentTdObj,childids);           }else{               addDataForSaving(reportguid,parentTdObj.parentNode);           }       }else if(reportfamily==ReportFamily.EDITABLEDETAIL2){           addDataForSaving(reportguid,'true');       }else{           wx_alert('错误的报表类型');       }   }}